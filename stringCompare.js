#!/usr/bin/env node
'strict';
let main = require('./index');

if (process.argv.length != 5) {
    console.log(`usage: ${process.argv[1]} ewasm-file '{}' func`);
    process.exit(0);
}

function generate(funcSig) {
    let callData = ''
    switch (funcSig) {
        case 'createAccount_secondstate_123':
            callData += '1928928700000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000b7365636f6e64737461746500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033132330000000000000000000000000000000000000000000000000000000000';
            break;
        case 'checkLogin_secondstate_abcd':
            callData += '4a9f277100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000b7365636f6e64737461746500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046162636400000000000000000000000000000000000000000000000000000000';
            break;
        case 'checkLogin_michael_123':
            callData += '4a9f27710000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000076d69636861656c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033132330000000000000000000000000000000000000000000000000000000000';
            break;
        case 'checkLogin_secondstate_123':
            callData += '4a9f277100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000b7365636f6e64737461746500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033132330000000000000000000000000000000000000000000000000000000000';
            break;
        default:
            console.log(`unknown func: ${funcSig}`);
            process.exit(0);
    }
    return callData;
}
let callData = generate(...process.argv.slice(4, 5));
main(process.argv[2], callData, process.argv[3]).then(console.log).catch(console.log);
